{% extends "mysports/base.html" %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <title>Document</title>
</head>
<body>
{%block body%}
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
   <li class="breadcrumb-item"><a href="/index">Home</a></li>
      <li class="breadcrumb-item active" aria-current="page"><a href="{{request.get_full_path}}">Cart</a></li>

  </ol>



</nav>
   <div class="container">
    <div class="row m-0">
      <div class="col-md-6">
        <h5>Review your cart</h5>
      </div>
      <div class="col-md-6">
      </div>
    </div>
    <div class="row m-0">
        <div class="col-md-6">
          <ul class="list-group" id="item_list">
          </ul>
         </div>

        <div class="col-md-6">
          <a class="btn btn-info btn-sm"  href="/index" role="button">Continue Shopping </a>
            <p></p>
          <a href='/checkout/'><button class='btn btn-info btn-sm' id='checkout'>Checkout</button></a>
          <p></p>
<!--          <a class="btn btn-info btn-sm "  onclick="" href="/users/userAccount/{{user.id}}" role="button">Empty Cart </a>-->
<!--           <button class='btn btn-warning btn-sm' id='emptyCart' onClick='clearLocalStorage(cart);'>Empty Cart</button>-->
<!--            <button class='btn btn-warning btn-sm' id='emptyCart' onClick='confirmRefresh();'>Empty Cart</button>-->

                <!-- Trigger the modal with a button -->
    <button type="button" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#myModal">Empty cart</button>

    <!-- Modal -->
    <div id="myModal" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
<!--            <button type="button" class="close" data-dismiss="modal">&times;</button>-->
          </div>
          <div class="modal-body">
            <p>Are you sure you want to clear cart?</p>
          </div>
          <div class="modal-footer">
            <button class='btn btn-danger btn-sm' id='emptyCart' onClick='confirmRefresh();'>Empty Cart</button>
            <button type="button" class="btn btn-info btn-sm" data-dismiss="modal">Close</button>
          </div>
        </div>

      </div>
    </div>


         </div>
     </div>
        <hr>


<script src="{% static '/mysports/cart.js' %}" type="text/javascript"></script>
<script src="{% static '/mysports/checkOut.js' %}" type="text/javascript"></script>
<script type="text/javascript">
function confirmRefresh() {
			clearLocalStorage(cart);
			setTimeout("location.reload(true);");

};

</script>
<script type="text/javascript">
$( "#foo" ).on( "remove", function( event, param1) {

  var retrievedObject = JSON.parse(localStorage.getItem('cart'));
<!--  var dummyRetrievedObject = retrievedObject;-->
<!--  console.log('retrievedObject: ', dummyRetrievedObject);-->
  delete retrievedObject[param1];
  console.log("OUT",retrievedObject);
  localStorage.removeItem("cart");
  localStorage.setItem('cart',JSON.stringify(retrievedObject));
  location.reload(true);
});

function onRemoveClick(productId) {
			$( "#foo").trigger( "remove", [productId] );
}


</script>
{% endblock %}
</body>
</html>
