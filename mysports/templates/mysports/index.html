{% extends "mysports/base.html" %}
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>


</head>
<body>
{%block body%}
<!--<hr/>-->
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="#">Home</a></li>

  </ol>
</nav>
<div id="carouselExampleIndicators" class="carousel slide carouselbar" data-ride="carousel">

    <div class="carousel-inner col-md-10 offset-md-2">
 <ol class="carousel-indicators">
    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
  </ol>
    <div class="carousel-item active ">
      <img class="d-block w-25" src="https://images.unsplash.com/photo-1562440499-64c9a111f713?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxleHBsb3JlLWZlZWR8Mnx8fGVufDB8fHw%3D&auto=format&fit=crop&w=600&q=60"
         alt="First slide" style="width:100%;height:auto;aspect-ratio:1;">
       <div class="carousel-caption d-none d-md-block" style="color:white;">
            <h5>Cricket</h5>
            <p>Cricket</p>
       </div>
    </div>
    <div class="carousel-item ">
      <img class="d-block w-25" src="https://3.imimg.com/data3/GN/FO/MY-11840221/batting-pads-1-500x500.jpg" alt="Second slide" style="width:100%;height:auto;aspect-ratio:1;">
      <div class="carousel-caption d-none d-md-block" style="color:white;">
            <h5>Bat</h5>
            <p>Bat</p>
       </div>
    </div>
    <div class="carousel-item ">
      <img class="d-block w-25" src="https://3.imimg.com/data3/GN/FO/MY-11840221/batting-pads-1-500x500.jpg" alt="Third slide" style="width:100%;height:auto;aspect-ratio:1;">
      <div class="carousel-caption d-none d-md-block" style="color:white;">
            <h5>Pad</h5>
            <p>Pad</p>
       </div>
    </div>

  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>
    <div class="row m-5">
            {% for product in productList %}
            <div class="col-md-3">
                <div class="card box">
                    <img src="{{ product.image }}" class="card-img-top" width="180" height="180px">
                    <div class="card-body">
                        <div id="nm{{product.id}}" class="card-title">{{ product.name }}</div>
                        {{ product.currency}}<div id="price{{product.id}}" class="card-text">{{ product.sellingPrice }}</div>

                        <a href="/detail/{{product.id}}" class="btn btn-info btn-sm">View</a>
                        <button id="{{product.id}}" class="btn atc btn-info btn-sm">Add to cart</button>
                        <div style="visibility:hidden" id="PI-{{product.id}}" class="card-text">{{product.id}}</div>

                    </div>
                </div>
                <br/>
            </div>
            {% endfor %}
        </div>

        <div class="row">
            <div class="col-md-6 offset-md-6">
                <ul class="pagination">
                    {% if productList.has_previous %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ productList.previous_page_number  }}">Previous</a>
                        </li>
                    {% endif %}


                    <li class="page-item active">
                        <a class="page-link" href="?page={{ productList.number  }}">Current</a>
                    </li>

                    {% if productList.has_next %}
                    <li class="page-item">
                        <a class="page-link" href="?page={{ productList.next_page_number  }}">Next</a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>

<div class="pagination">
            <span class="step-links">
        {% if productList.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ productList.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ productList.number }} of {{ productList.paginator.num_pages }}.
        </span>

        {% if productList.has_next %}
            <a href="?page={{ productList.next_page_number }}">next</a>
            <a href="?page={{ productList.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
        </span>
    </div>
<!--<script type="text/javascript">-->
<!--    console.log('This is working');-->

<!--    if(localStorage.getItem('cart')==null){-->
<!--        var cart = {};-->
<!--    }-->
<!--    else{-->
<!--        cart = JSON.parse(localStorage.getItem('cart'));-->
<!--    }-->

<!--    $(document).on('click','.atc',function(){-->
<!--        console.log("The add to cart button is clicked");-->
<!--        var item_id = this.id.toString();-->
<!--        console.log('This is the item_' + item_id);-->
<!--        if(cart[item_id]!=undefined){-->
<!--            console.log('This is item is defined');-->
<!--            quantity = cart[item_id][0] + 1;-->
<!--            cart[item_id][0] = quantity;-->
<!--            console.log('This is the item_Qty' + quantity);-->
<!--            console.log(parseFloat(document.getElementById("price"+item_id).innerHTML))-->
<!--            cart[item_id][2] = cart[item_id][2] + parseFloat(document.getElementById("price"+item_id).innerHTML);-->
<!--        }-->
<!--        else{-->
<!--            quantity = 1;-->
<!--            console.log('This is the item_Qty' + "price"+item_id);-->
<!--            console.log('price : &#45;&#45; ' + document.getElementById("price"+item_id).innerHTML)-->
<!--            price = parseFloat(document.getElementById("price"+item_id).innerHTML);-->
<!--            console.log(price)-->
<!--            name = document.getElementById("nm"+item_id).innerHTML;-->
<!--            cart[item_id]=[quantity,name,price];-->
<!--        }-->
<!--        console.log(cart);-->
<!--        localStorage.setItem('cart',JSON.stringify(cart));-->
<!--        document.getElementById("cart").innerHTML = "Cart("+ Object.keys(cart).length +")";-->
<!--        DisplayCart(cart);-->

<!--    });-->

<!--    DisplayCart(cart);-->
<!--    function DisplayCart(cart){-->
<!--        console.log('Inside Display Cart')-->
<!--        var cartString ="";-->
<!--        cartString += "<h5>This is your cart</h5>";-->
<!--        var cartIndex = 1;-->

<!--        for(var x in cart){-->
<!--            console.log('Inside Display Cart &#45;&#45; ' + cart[x][0] + ' &#45;&#45; ' +  cart[x][1] + ' &#45;&#45; ' +  cart[x][2])-->
<!--            cartString += cartIndex;-->
<!--            cartString += "Title:" + cart[x][1] + "Qty:" + cart[x][0] + "Price:" + cart[x][2] + "</br>";-->

<!--            cartIndex+=1;-->
<!--        }-->

<!--        cartString += "<a href='checkout'><button class='btn btn-warning' id='checkout'>Checkout</button></a>";-->
<!--        document.getElementById("cart").setAttribute('data-content',cartString);-->
<!--        $('[data-toggle="popover"]').popover();-->
<!--        console.log('cartString &#45;&#45; ' + cartString)-->
<!--        document.getElementById("cart").innerHTML = "Cart("+ Object.keys(cart).length +")";-->
<!--    }-->

<!--</script>-->
<script src="{% static '/mysports/cart.js' %}" type="text/javascript"></script>
{% endblock %}

</body>

</html>